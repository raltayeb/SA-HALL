# ๐ ููุฎุต ุงูุชุบููุฑุงุช - ูุธุงู ุงูุงุดุชุฑุงูุงุช ูุงููุญุงุณุจุฉ ูุงููุงุนุงุช ุงููููุฒุฉ

## โ ุชู ุงูุฅูุฌุงุฒ ุจูุฌุงุญ

### 1. ๐ข ูุธุงู ุงูุงุดุชุฑุงูุงุช (Vendor Subscription System)

#### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- `pages/VendorSubscription.tsx` - ุตูุญุฉ ุงุฎุชูุงุฑ ูุฏูุน ุงูุงุดุชุฑุงู
- `db_vendor_subscription.sql` - ููู ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงููุงูู

#### ุงููููุฒุงุช:
- โ **ุงุดุชุฑุงู ูุฏู ุงูุญูุงุฉ** ูููุงุนุงุช (500 ุฑ.ุณ) ูุงูุฎุฏูุงุช (200 ุฑ.ุณ)
- โ **ุชูุฌูู ุชููุงุฆู** ููุจุงุฆุน ุงูุฌุฏูุฏ ุฅูู ุตูุญุฉ ุงูุงุดุชุฑุงู
- โ **ููุน ุงููุตูู** ููุตูุญุงุช ุจุฏูู ุงุดุชุฑุงู ูุดุท
- โ **ุชุญุฏูุซ ุงูููู ุงูุดุฎุตู** ุชููุงุฆูุงู ุจุนุฏ ุงูุฏูุน

#### ุงูุชุฏูู:
```
ุชุณุฌูู ุฌุฏูุฏ โ ุงูุชุญูู ูู ุงูุงุดุชุฑุงู โ 
  โโ ูุง ููุฌุฏ ุงุดุชุฑุงู โ ุตูุญุฉ ุงูุฏูุน
  โโ ููุฌุฏ ุงุดุชุฑุงู โ ุงุฎุชูุงุฑ ูุงุนุฉ/ุฎุฏูุฉ โ ุฅุถุงูุฉ ุงูุฃุตู
```

---

### 2. ๐ฐ ุงููุธุงู ุงููุญุงุณุจู (Accounting & Zakat System)

#### ุงููููุงุช ุงููุญุฏุซุฉ:
- `pages/VendorAccounting.tsx` - ููุญุฉ ุงูููุงุชูุฑ ูุงููุตุฑููุงุช ูุงูุฒูุงุฉ

#### ุงููููุฒุงุช:
- โ **ุฅูุดุงุก ุงูููุงุชูุฑ** ูุน ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (15%)
- โ **ุชุณุฌูู ุงููุตุฑููุงุช** ูุน ุงููุงุชูุฑุฉ ุงูุถุฑูุจูุฉ
- โ **ุญุณุงุจ ุงูุฒูุงุฉ** ุชููุงุฆูุงู (2.5% ูู ุตุงูู ุงูุฏุฎู)
- โ **ุนุฑุถ ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ**:
  - ุงููุญุตูุฉ ูู ุงูุนููุงุก
  - ุงููุฏููุนุฉ ููููุฑุฏูู
  - ุงูุตุงูู ุงููุณุชุญู
- โ **ูุชูุงูู ูุน ููุฆุฉ ุงูุฒูุงุฉ ูุงูุถุฑูุจุฉ ุงูุณุนูุฏูุฉ**

#### ุงูุฅุญุตุงุฆูุงุช ุงููุนุฑูุถุฉ:
1. ุงูุฅูุฑุงุฏุงุช ุงููููุฉ
2. ุงููุตุฑููุงุช ุงููููุฉ
3. ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (ุงููุญุตูุฉ - ุงููุฏููุนุฉ)
4. ุงูุฒูุงุฉ ุงููุณุชุญูุฉ (2.5%)
5. ุตุงูู ุงูุฑุจุญ

---

### 3. โญ ุงููุงุนุงุช ุงููููุฒุฉ (Featured Halls System)

#### ุงููููุงุช ุงูุฌุฏูุฏุฉ:
- `pages/FeaturedHallsManagement.tsx` - ููุญุฉ ุฅุฏุงุฑุฉ ุงููุงุนุงุช ุงููููุฒุฉ

#### ุงููููุงุช ุงููุญุฏุซุฉ:
- `pages/Home.tsx` - ุฅุถุงูุฉ ูุณู "ูุงุนุงุช ูููุฒุฉ" ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- `components/Layout/Sidebar.tsx` - ุฅุถุงูุฉ ูุงุฆูุฉ ููุณูุจุฑ ุฃุฏูู
- `types.ts` - ุฅุถุงูุฉ ุงูุฃููุงุน ุงูุฌุฏูุฏุฉ

#### ุงููููุฒุงุช:
- โ **ูุณู ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ** ูุนุฑุถ 3 ูุงุนุงุช ูููุฒุฉ
- โ **ุชุตููู ูุฎู** ูุน ุดุงุฑุฉ "ูููุฒุฉ" ูุชุฏุฑุฌุฉ
- โ **ุชุญุฏูุฏ ูุฏุฉ ุงูุชูููุฒ** (7, 14, 30, 60, 90, 180 ููู)
- โ **ุงูุชูุงุก ุชููุงุฆู** ุนูุฏ ุงูุชูุงุก ุงููุฏุฉ
- โ **ุฅุฏุงุฑุฉ ุงูุณูุจุฑ ุฃุฏูู** ูููุงุนุงุช ุงููููุฒุฉ

#### ูุงุนุฏุฉ ุงูุจูุงูุงุช:
```sql
-- ุฌุฏูู ุงููุงุนุงุช ุงููููุฒุฉ
CREATE TABLE featured_halls (
    hall_id UUID,
    start_date TIMESTAMP,
    end_date TIMESTAMP,
    is_active BOOLEAN
);

-- ุฏุงูุฉ ุงูุงูุชูุงุก ุงูุชููุงุฆู
CREATE FUNCTION expire_featured_halls()
-- ุชุญุฏุซ ุชููุงุฆูุงู ุนูุฏ ุงููุตูู ูููุงุนุฉ
```

---

### 4. ๐๏ธ ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ:
1. **subscriptions** - ุชุชุจุน ุงูุงุดุชุฑุงูุงุช
2. **invoices** - ุงูููุงุชูุฑ ุงูุถุฑูุจูุฉ
3. **expenses** - ุงููุตุฑููุงุช
4. **zakat_calculations** - ุญุณุงุจุงุช ุงูุฒูุงุฉ
5. **featured_halls** - ุงููุงุนุงุช ุงููููุฒุฉ

#### ุงูุชุนุฏููุงุช:
- **user_profiles**: ุฅุถุงูุฉ ุญููู ุงูุงุดุชุฑุงู
- **halls**: ุฅุถุงูุฉ ุญููู ุงูุชูููุฒ

#### ุงูุฃูุงู (RLS):
```sql
-- ุงูุจุงุฆุน ูุฑู ุจูุงูุงุชู ููุท
CREATE POLICY "Vendors view own invoices" ON invoices
    FOR SELECT USING (vendor_id = auth.uid());

-- ุงูุณูุจุฑ ุฃุฏูู ูุฑู ุงููู
CREATE POLICY "Super admin view all" ON subscriptions
    FOR SELECT USING (role = 'super_admin');
```

---

### 5. ๐ ุงูุชูุงูู ูู App.tsx

#### ุงููุณุงุฑุงุช ุงูุฌุฏูุฏุฉ:
```typescript
case 'vendor_subscription': // ุตูุญุฉ ุงูุงุดุชุฑุงู
case 'featured_halls':      // ุฅุฏุงุฑุฉ ุงููุงุนุงุช ุงููููุฒุฉ (ุณูุจุฑ ุฃุฏูู ููุท)
```

#### ููุทู ุงูุชูุฌูู:
```typescript
const routeUser = async (profile, userId) => {
    // 1. ุงูุชุญูู ูู ุงูุงุดุชุฑุงู
    if (!hasSubscription) {
        setActiveTab('vendor_subscription');
        return;
    }
    
    // 2. ุงูุชุญูู ูู ุงูุฃุตูู
    if (!hasAssets) {
        setRegStep(4); // ุงุฎุชูุงุฑ ูุงุนุฉ/ุฎุฏูุฉ
    }
};
```

---

## ๐ฆ ููููุฉ ุงูุชูููุฐ

### ุงูุฎุทูุฉ 1: ุชูููุฐ SQL
```bash
# ูู Supabase Dashboard โ SQL Editor
# ุงูุณุฎ ูุญุชููุงุช db_vendor_subscription.sql ูููุฐูุง
```

### ุงูุฎุทูุฉ 2: ุงุฎุชุจุงุฑ ุงูุงุดุชุฑุงู
1. ุณุฌู ุจุงุฆุน ุฌุฏูุฏ
2. ูุฌุจ ุชูุฌููู ุฅูู ุตูุญุฉ ุงูุงุดุชุฑุงู
3. ุงุฎุชุฑ ููุน ูุงุดุชุฑู
4. ูุฌุจ ุชูุฌููู ุฅูู ุงุฎุชูุงุฑ ูุงุนุฉ/ุฎุฏูุฉ

### ุงูุฎุทูุฉ 3: ุงุฎุชุจุงุฑ ุงููุงุนุงุช ุงููููุฒุฉ
1. ุณุฌู ุฏุฎูู ูู Super Admin
2. ุงูุชูู ุฅูู "ุงููุงุนุงุช ุงููููุฒุฉ" ูู ุงููุงุฆูุฉ
3. ุฃุถู ูุงุนุฉ ููุฏุฉ ูุญุฏุฏุฉ
4. ุชุญูู ูู ุธููุฑูุง ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ

### ุงูุฎุทูุฉ 4: ุงุฎุชุจุงุฑ ุงููุธุงู ุงููุญุงุณุจู
1. ุงูุชูู ุฅูู "ุงูููุงุชูุฑ ูุงูุญุณุงุจุงุช"
2. ุฃุถู ูุงุชูุฑุฉ ุฌุฏูุฏุฉ
3. ุฃุถู ูุตุฑูู ุฌุฏูุฏ
4. ุชุญูู ูู ุญุณุงุจ ุงูุฒูุงุฉ ูุงูุถุฑูุจุฉ

---

## ๐ฏ ุงูููุฒุงุช ุงูุฑุฆูุณูุฉ

### ููุจุงุฆุนูู:
- โ ุงุดุชุฑุงู ููุฑุฉ ูุงุญุฏุฉ ูุฏู ุงูุญูุงุฉ
- โ ูุธุงู ููุงุชูุฑ ูุชูุงููู ูุน ุงูุถุฑูุจุฉ
- โ ุชุชุจุน ุงููุตุฑููุงุช
- โ ุญุณุงุจ ุงูุฒูุงุฉ ุชููุงุฆูุงู
- โ ููุญุฉ ูุญุงุณุจูุฉ ุดุงููุฉ

### ููุณูุจุฑ ุฃุฏูู:
- โ ุฅุฏุงุฑุฉ ุงููุงุนุงุช ุงููููุฒุฉ
- โ ุชุญุฏูุฏ ูุฏุฉ ุงูุชูููุฒ
- โ ุนุฑุถ ุฌููุน ุงูุงุดุชุฑุงูุงุช
- โ ุฅุญุตุงุฆูุงุช ุดุงููุฉ

### ููุฒูุงุฑ:
- โ ูุณู "ูุงุนุงุช ูููุฒุฉ" ูู ุงูุตูุญุฉ ุงูุฑุฆูุณูุฉ
- โ ุชุตููู ูุฎู ูุฌุฐุงุจ
- โ ูุตูู ุณุฑูุน ูููุงุนุงุช ุงููููุฒุฉ

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ูุงูุญุณุงุจุงุช

### ุถุฑูุจุฉ ุงููููุฉ ุงููุถุงูุฉ (15%):
```
ุถุฑูุจุฉ ูุญุตูุฉ ูู ุงูุนููุงุก: 1500 ุฑ.ุณ
ุถุฑูุจุฉ ูุฏููุนุฉ ููููุฑุฏูู: 500 ุฑ.ุณ
ุตุงูู ุงูุถุฑูุจุฉ ุงููุณุชุญูุฉ: 1000 ุฑ.ุณ
```

### ุงูุฒูุงุฉ (2.5%):
```
ุงูุฅูุฑุงุฏุงุช: 100,000 ุฑ.ุณ
ุงููุตุฑููุงุช: 60,000 ุฑ.ุณ
ุตุงูู ุงูุฏุฎู: 40,000 ุฑ.ุณ
ุงูุฒูุงุฉ ุงููุณุชุญูุฉ: 1,000 ุฑ.ุณ (2.5%)
```

---

## ๐ ุงูุฃูุงู ูุงูุตูุงุญูุงุช

### ุงูุจุงุฆุนูู:
- ุฑุคูุฉ ุจูุงูุงุชูู ููุท
- ุฅูุดุงุก ุงูููุงุชูุฑ ูุงููุตุฑููุงุช
- ุนุฑุถ ุญุณุงุจุงุช ุงูุฒูุงุฉ ุงูุฎุงุตุฉ ุจูู

### ุงูุณูุจุฑ ุฃุฏูู:
- ุฑุคูุฉ ุฌููุน ุงูุจูุงูุงุช
- ุฅุฏุงุฑุฉ ุงููุงุนุงุช ุงููููุฒุฉ
- ุฅุฏุงุฑุฉ ุงูุงุดุชุฑุงูุงุช

---

## ๐ ููุงุญุธุงุช ูููุฉ

1. **SQL Execution**: ูุฌุจ ุชูููุฐ ููู `db_vendor_subscription.sql` ูุจู ุงูุงุณุชุฎุฏุงู
2. **RLS Policies**: ุชู ุชุทุจูู ุณูุงุณุงุช ุงูุฃูุงู ุนูู ุฌููุน ุงูุฌุฏุงูู ุงูุฌุฏูุฏุฉ
3. **Auto-expiry**: ุงููุงุนุงุช ุงููููุฒุฉ ุชูุชูู ุชููุงุฆูุงู ุนูุฏ ุงูุชูุงุก ุงููุฏุฉ
4. **Zakat Compliance**: ุงููุธุงู ูุชูุงูู ูุน ููุฆุฉ ุงูุฒูุงุฉ ูุงูุถุฑูุจุฉ ุงูุณุนูุฏูุฉ
5. **Lifetime Subscription**: ุงูุงุดุชุฑุงูุงุช ูุฏู ุงูุญูุงุฉ ุจุฏูู ุชุฌุฏูุฏ

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ (ุงุฎุชูุงุฑู)

1. **ุจูุงุจุฉ ุงูุฏูุน**: ุชูุงูู ูุน HyperPay ุฃู Moyasar
2. **ุชูุงุฑูุฑ PDF**: ุชุตุฏูุฑ ุงูููุงุชูุฑ ูุงูุชูุงุฑูุฑ
3. **ุฅุดุนุงุฑุงุช**: ุชูุจููุงุช ุจุงูุชูุงุก ุงููุงุนุงุช ุงููููุฒุฉ
4. **ุชุญูููุงุช**: ุฑุณูู ุจูุงููุฉ ููุฅูุฑุงุฏุงุช ูุงููุตุฑููุงุช
5. **ุชุนุฏุฏ ุงูุนููุงุช**: ุฏุนู ุนููุงุช ูุฎุชููุฉ

---

**ุชู ุงูุฅูุฌุงุฒ ุจูุฌุงุญ! ๐**
